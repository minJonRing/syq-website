webpackJsonp([1],{"2iqz":function(t,e){},"3rIp":function(t,e){},"7tAS":function(t,e){},Eohe:function(t,e){},JKkS:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("xd7I"),s={name:"App",data:function(){return{}},methods:{handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)},handleLoginOut:function(){var t=this;this.$axios.get("/app/logout").then(function(e){200==e.data.code&&(t.$message({type:"success",message:e.data.msg}),window.location.href="/app/admin")})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"head"},[t._m(0),t._v(" "),a("div",{staticClass:"head-user"},[a("a",{staticClass:"login-out",attrs:{href:"javascript:"},on:{click:t.handleLoginOut}},[t._v("退出登录")])])]),t._v(" "),a("div",{staticClass:"cont"},[a("div",{staticClass:"left"},[a("el-col",{attrs:{span:24}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"unique-opened":!0,router:!0,"default-active":"1","background-color":"#fff","text-color":"#333","active-text-color":"#ffd04b"},on:{open:t.handleOpen,close:t.handleClose}},[a("el-menu-item",{attrs:{index:"/"}},[a("i",{staticClass:"el-icon-menu"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("首页")])]),t._v(" "),a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-setting"}),t._v(" "),a("span",[t._v("基础")])]),t._v(" "),a("el-menu-item-group",{attrs:{title:"首页设置"}},[a("el-menu-item",{attrs:{index:"/basis"}},[t._v("首页图片设置")])],1),t._v(" "),a("el-menu-item-group",{attrs:{title:"banner设置"}},[a("el-menu-item",{attrs:{index:"/banner"}},[t._v("网页banner设置")])],1)],2),t._v(" "),a("el-menu-item",{attrs:{index:"work"}},[a("i",{staticClass:"el-icon-document"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("产品")])]),t._v(" "),a("el-menu-item",{attrs:{index:"news"}},[a("i",{staticClass:"el-icon-star-off"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("新闻")])])],1)],1)],1),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"box"},[a("router-view")],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"head-img"},[e("img",{attrs:{src:"",alt:""}})])}]};var n=a("C7Lr")(s,o,!1,function(t){a("Eohe")},null,null).exports,r=a("84iU"),l=a.n(r),c=a("3XdE"),d={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"app"},[this._v("\n    欢迎您...\n")])},staticRenderFns:[]};var u=a("C7Lr")({name:"app",data:function(){return{}}},d,!1,function(t){a("l3vy")},"data-v-07e4625c",null).exports,h=a("IHPB"),f=a.n(h),p=a("a3Yh"),m=a.n(p),v={workType:[{text:"创意短视频",value:1},{text:"企业产品",value:2},{text:"影视广告",value:3},{text:"暂定",value:4}],newsType:[{text:"类型1",value:1},{text:"类型2",value:2},{text:"类型3",value:3},{text:"类型4",value:4}]},g=a("Eq4a"),b=a.n(g),w={name:"edit",props:["id"],data:function(){return{form:{title:"",desc:"",sort:99,type:"",typeArr:"",cover:"",isLong:!1,isSwitch:!1,percentage:0,video:[],outVideo:"",outVideoArr:[]},cover:"",editor:""}},mounted:function(){this.form.typeArr=v.workType,this.handleEditorInit()},watch:{id:function(t){t&&this.handleAjaxEdit()}},methods:{handleEditorInit:function(){var t=this;this.editor=new b.a(this.$refs.editor),this.editor.customConfig.uploadImgServer="/app/upload/img",this.editor.customConfig.uploadFileName="imgs",this.editor.customConfig.uploadImgMaxSize=52428800,this.editor.customConfig.onchange=function(e){t.editorContent=e},this.editor.create()},handleAjaxEdit:function(){var t=this;this.$axios.get("/app/project/edit",{params:{id:this.id}}).then(function(e){var a=e.data.data;t.form.title=a.title||"",t.form.desc=a.desc||"",t.form.sort=a.sort||99,t.form.type=a.type?a.type-0:"",t.form.cover=a.cover||"",t.cover=a.cover||"",t.form.isLong=a.isLong||!1,t.form.isSwitch=a.isSwitch||!1,t.form.video=a.video?a.video.split(","):[],t.form.outVideoArr=a.outVideo?a.outVideo.split(","):[],t.editor.txt.html(a.cont)})},hanleOnSubmit:function(){var t=this,e={type:this.form.type,title:this.form.title,desc:this.form.desc,sort:this.form.sort,cover:this.form.cover,isLong:this.form.isLong,isSwitch:this.form.isSwitch,video:this.form.video.join(","),outVideo:this.form.outVideoArr.join(","),cont:this.editor.txt.html()};this.id&&(e.id=this.id),this.$axios.post("/app/project/create",e).then(function(e){200==e.data.code&&(t.$message({type:"success",message:e.data.msg}),t.handleReturn())})},handleAvatarSuccess:function(t,e){200==t.code&&(this.form.cover=t.data[0],this.cover=URL.createObjectURL(e.raw),this.$message.success(t.msg))},beforeAvatarUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error("上传图片大小不能超过 2MB!"),e},handleVideoLoader:function(t){var e=this;this.form.percentage=0;var a=t.target.files;if(a.length){var i=new FormData;i.append("video",a[0]);var s={onUploadProgress:function(t){var a=t.loaded/t.total*100|0;e.form.percentage=a}};this.$axios.post("/app/video",i,s).then(function(t){var a=t.data;200==t.data.code&&(e.$message.success(a.msg),e.form.video.push(a.url))}).catch(function(t){e.$message.error("上传出错,请重新上传/或使用外部视频")})}},handleRemoveVideo:function(t,e){this.form.video.splice(e,1)},handleConfirmOutVideo:function(){var t=this.form.outVideo;if(t){var e=t.replace(/(width="480")/,'width="360"').replace(/(height="400")/,'height="240"');this.form.outVideoArr.push(e),this.form.outVideo=""}else this.$message.error("外部视频内容不能为空!")},handleRemoveOutVideo:function(t,e){this.form.outVideoArr.splice(e,1)},handleReturn:function(){this.$emit("handleReturnHome"),this.form.title="",this.form.desc="",this.form.type="",this.form.cover="",this.form.isLong=!1,this.form.isSwitch=!1,this.form.percentage=0,this.form.video=[],this.form.outVideo="",this.form.outVideoArr=[],this.cover="",this.editor.txt.clear()}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit"},[a("div",{staticClass:"edit-head"},[a("p",[t._v("新增/编辑")]),a("el-button",{on:{click:t.handleReturn}},[t._v("返回")])],1),t._v(" "),a("div",{staticClass:"edit-form"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{staticClass:"w360",attrs:{placeholder:"请选择类型"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.form.typeArr,function(t,e){return a("el-option",{key:e,attrs:{label:t.text,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{staticClass:"w360",attrs:{"suffix-icon":"el-icon-edit",span:12,placeholder:"请输入标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"前言"}},[a("el-input",{staticClass:"w360",attrs:{type:"textarea"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"首页排序"}},[a("el-input",{staticClass:"w360",model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"封面"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/app/upload/cover","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.cover?a("img",{staticClass:"avatar",attrs:{src:t.cover}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"封面是否是长图"}},[a("el-switch",{model:{value:t.form.isLong,callback:function(e){t.$set(t.form,"isLong",e)},expression:"form.isLong"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"使用外部视频"}},[a("el-switch",{model:{value:t.form.isSwitch,callback:function(e){t.$set(t.form,"isSwitch",e)},expression:"form.isSwitch"}})],1),t._v(" "),t.form.isSwitch?a("el-form-item",{attrs:{label:"外部视频"}},[a("div",[a("el-input",{staticClass:"w360",attrs:{placeholder:"请输入正确的外部链接"},model:{value:t.form.outVideo,callback:function(e){t.$set(t.form,"outVideo",e)},expression:"form.outVideo"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleConfirmOutVideo}},[t._v("确定使用")])],1),t._v(" "),a("div",{staticClass:"out-video-list"},t._l(t.form.outVideoArr,function(e,i){return a("div",{key:i,staticClass:"out-video-item"},[a("el-tooltip",{staticClass:"remove-video",attrs:{effect:"dark",content:"删除视频",placement:"left"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.handleRemoveOutVideo(e,i)}}})],1),t._v(" "),a("div",{staticClass:"out-video-item-el",domProps:{innerHTML:t._s(e)}})],1)}),0)]):t._e(),t._v(" "),t.form.isSwitch?t._e():a("el-form-item",{attrs:{label:"视频上传"}},[a("div",{staticClass:"video-upload"},[a("div",{staticClass:"video-upload-box"},[a("div",{staticClass:"video-upload-btn"},[a("input",{attrs:{type:"file",placeholder:"*视频",accept:"video/mp4"},on:{change:function(e){return t.handleVideoLoader(e)}}}),t._v(" "),a("el-button",[t._v("上传视频")])],1),t._v(" "),a("el-progress",{staticClass:"video-upload-bar",attrs:{"text-inside":!0,"stroke-width":18,percentage:t.form.percentage}})],1),t._v(" "),t.form.video.length?a("div",{staticClass:"videos"},t._l(t.form.video,function(e,i){return a("div",{key:i,staticClass:"video-box"},[a("el-tooltip",{staticClass:"remove-video",attrs:{effect:"dark",content:"删除视频",placement:"left"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.handleRemoveVideo(e,i)}}})],1),t._v(" "),a("video",{attrs:{width:"360",height:"240",controls:"",autoplay:"",src:e}})],1)}),0):t._e()])]),t._v(" "),a("el-form-item",{attrs:{label:"内容正文"}},[a("div",{ref:"editor"})]),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.hanleOnSubmit}},[t._v("提交保存")])],1)],1)],1)])},staticRenderFns:[]};var y={name:"work",data:function(){var t;return t={init:[],list:[]},m()(t,"list",[]),m()(t,"nowList",[]),m()(t,"listType",0),m()(t,"typeArr",[]),m()(t,"multipleSelection",[]),m()(t,"currentPage",1),m()(t,"total",1),m()(t,"nowPage",10),m()(t,"isEdit",!1),m()(t,"editId",0),m()(t,"removeId",0),m()(t,"loading",!1),t},mounted:function(){this.typeArr=v.workType,this.handleAjaxList()},watch:{loading:function(t){var e=this;t&&setTimeout(function(){e.loading=!1},3e3)}},methods:{handleRefresh:function(){this.currentPage=1,this.handleAjaxList()},handleAjaxList:function(){var t=this;this.loading=!0,this.$axios.get("/app/project/list").then(function(e){200==e.data.code&&(t.init=[].concat(f()(e.data.data)),t.total=t.init.length,t.handleInit(t.init))})},handleInit:function(t){var e=[];for(var a in e[0]=t,this.typeArr){var i=this.typeArr[a].value;e[i]||(e[i]=[])}for(var s in t){var o=t[s].type-0;e[o=o||1].push(t[s])}this.list=e,this.handleFilterList()},handleFilterList:function(){var t=this.currentPage-1;this.nowList=this.list[this.listType].slice(t*this.nowPage,this.currentPage*this.nowPage),this.loading=!1,!this.nowList.length&&this.currentPage>1&&(this.currentPage=t,t=this.currentPage-1,this.nowList=this.list[this.listType].slice(t*this.nowPage,this.currentPage*this.nowPage))},handleSelectionChange:function(t){this.multipleSelection=t},handleReturnTime:function(t){return t.replace(/(T).+/g,"")},handleEdit:function(t,e){this.editId=e.row._id},handleDelete:function(t,e){var a=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.post("/app/project/remove",{id:e._id}).then(function(t){200==t.data.code&&(a.$message({type:"success",message:t.data.msg}),a.handleAjaxList())})}).catch(function(){})},handleTagFilter:function(t){var e=void 0;switch(t-0){case 1:e="primary";break;case 2:e="success";break;case 3:e="info";break;case 4:e="warning";break;default:e="danger"}return e},handleFilterTag:function(t,e){return this.listType=t,e.type===t+""},handleReFilter:function(t){var e=this;t.tag.length||(this.listType=0),this.nowList=this.list[this.listType].slice(0,this.nowPage),this.total=this.list[this.listType].length,this.nowList.length||setTimeout(function(){e.nowList=e.list[0].slice(0,e.nowPage),e.total=1},600),this.currentPage=1},handleCurrentChange:function(t){this.currentPage=t,this.handleFilterList()},handleNewAndEdit:function(){this.isEdit=!0},handleReturnList:function(){this.isEdit=!1,this.editId=0}},components:{Edit:a("C7Lr")(w,_,!1,function(t){a("v158"),a("3rIp")},"data-v-2dc0b025",null).exports}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"work"},[a("div",{staticClass:"work-head"},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleNewAndEdit}},[t._v("新建")]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:t.handleRefresh}},[t._v("刷新")])],1),t._v(" "),a("div",{staticClass:"table-box"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.nowList,border:"","tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange,"filter-change":t.handleReFilter}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"日期",sortable:"",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.handleReturnTime(e.row.createtime)))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"cover",label:"封面",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"list-cover",attrs:{src:t.row.cover}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"type",label:"标签",width:"160","column-key":"tag",filters:t.typeArr,"filter-method":t.handleFilterTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.handleTagFilter(e.row.type),"disable-transitions":""}},[t._v(t._s(t.typeArr[e.row.type-1]?t.typeArr[e.row.type-1].text:"暂无"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e)}}}),t._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}})]}}])})],1),t._v(" "),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"current-page":t.currentPage,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("div",{class:["work-edit",{active:t.isEdit||t.editId}]},[a("Edit",{attrs:{id:t.editId},on:{handleReturnHome:t.handleReturnList}})],1)])},staticRenderFns:[]};var x=a("C7Lr")(y,C,!1,function(t){a("gwJ0")},"data-v-45668ec2",null).exports,k={name:"edit",props:["id"],data:function(){return{form:{title:"",desc:"",type:"",typeArr:"",cover:"",isSwitch:!1,percentage:0,video:[]},cover:"",editor:""}},mounted:function(){this.form.typeArr=v.newsType,this.handleEditorInit()},watch:{id:function(t){t&&this.handleAjaxEdit()}},methods:{handleEditorInit:function(){var t=this;this.editor=new b.a(this.$refs.editor),this.editor.customConfig.uploadImgServer="/app/upload/img",this.editor.customConfig.uploadFileName="imgs",this.editor.customConfig.onchange=function(e){t.editorContent=e},this.editor.create()},handleAjaxEdit:function(){var t=this;this.$axios.get("/app/informa/edit",{params:{id:this.id}}).then(function(e){var a=e.data.data;t.form.title=a.title||"",t.form.desc=a.desc||"",t.form.type=a.type?a.type-0:"",t.form.cover=a.cover||"",t.cover=a.cover||"",t.form.isSwitch=a.isSwitch||!1,t.form.video=a.video?a.video.split(","):[],t.editor.txt.html(a.cont)})},hanleOnSubmit:function(){var t=this,e={type:this.form.type,title:this.form.title,desc:this.form.desc,cover:this.form.cover,isSwitch:this.form.isSwitch,video:this.form.video,cont:this.editor.txt.html()};this.id&&(e.id=this.id),this.$axios.post("/app/informa/create",e).then(function(e){200==e.data.code&&(t.$message({type:"success",message:e.data.msg}),t.handleReturn())})},handleAvatarSuccess:function(t,e){200==t.code&&(this.form.cover=t.data[0],this.cover=URL.createObjectURL(e.raw),this.$message.success(t.msg))},beforeAvatarUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error("上传图片大小不能超过 2MB!"),e},handleVideoLoader:function(t){var e=this;this.form.percentage=0;var a=t.target.files;if(a.length){var i=new FormData;i.append("video",a[0]);var s={onUploadProgress:function(t){var a=t.loaded/t.total*100|0;e.form.percentage=a}};this.$axios.post("/app/video",i,s).then(function(t){var a=t.data;200==t.data.code&&(e.$message.success(a.msg),e.form.video.push(a.url))}).catch(function(t){e.$message.error("上传出错,请重新上传")})}},handleRemoveVideo:function(t,e){this.form.video.splice(e,1)},handleReturn:function(){this.$emit("handleReturnHome"),this.form.title="",this.form.desc="",this.form.type="",this.form.cover="",this.form.isSwitch=!1,this.form.percentage=0,this.form.video=[],this.cover="",this.editor.txt.clear()}}},A={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit"},[a("div",{staticClass:"edit-head"},[a("p",[t._v("新增/编辑")]),a("el-button",{on:{click:t.handleReturn}},[t._v("返回")])],1),t._v(" "),a("div",{staticClass:"edit-form"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{staticClass:"w360",attrs:{placeholder:"请选择活动区域"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.form.typeArr,function(t,e){return a("el-option",{key:e,attrs:{label:t.text,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{staticClass:"w360",attrs:{"suffix-icon":"el-icon-edit",span:12},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"前言"}},[a("el-input",{staticClass:"w360",attrs:{type:"textarea"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"封面"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/app/upload/cover","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.cover?a("img",{staticClass:"avatar",attrs:{src:t.cover}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"使用外部视频"}},[a("el-switch",{model:{value:t.form.isSwitch,callback:function(e){t.$set(t.form,"isSwitch",e)},expression:"form.isSwitch"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"视频上传"}},[a("div",{staticClass:"video-upload"},[a("div",{staticClass:"video-upload-box"},[a("div",{staticClass:"video-upload-btn"},[a("input",{attrs:{type:"file",placeholder:"*视频",accept:"video/mp4"},on:{change:function(e){return t.handleVideoLoader(e)}}}),t._v(" "),a("el-button",[t._v("上传视频")])],1),t._v(" "),a("el-progress",{staticClass:"video-upload-bar",attrs:{"text-inside":!0,"stroke-width":18,percentage:t.form.percentage}})],1),t._v(" "),t.form.video.length?a("div",{staticClass:"videos"},t._l(t.form.video,function(e,i){return a("div",{key:i,staticClass:"video-box"},[a("el-tooltip",{staticClass:"remove-video",attrs:{effect:"dark",content:"删除视频",placement:"left"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.handleRemoveVideo(e,i)}}})],1),t._v(" "),a("video",{attrs:{width:"360",height:"240",controls:"",autoplay:"",src:e}})],1)}),0):t._e()])]),t._v(" "),a("el-form-item",{attrs:{label:"内容正文"}},[a("div",{ref:"editor"})]),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.hanleOnSubmit}},[t._v("提交保存")])],1)],1)],1)])},staticRenderFns:[]};var S={name:"work",data:function(){var t;return t={init:[],list:[]},m()(t,"list",[]),m()(t,"nowList",[]),m()(t,"listType",0),m()(t,"typeArr",[]),m()(t,"multipleSelection",[]),m()(t,"currentPage",1),m()(t,"total",1),m()(t,"nowPage",10),m()(t,"isEdit",!1),m()(t,"editId",0),m()(t,"removeId",0),m()(t,"loading",!1),t},mounted:function(){this.typeArr=v.workType,this.handleAjaxList()},watch:{loading:function(t){var e=this;t&&setTimeout(function(){e.loading=!1},3e3)}},methods:{handleRefresh:function(){this.currentPage=1,this.handleAjaxList()},handleAjaxList:function(){var t=this;this.loading=!0,this.$axios.get("/app/informa/list").then(function(e){200==e.data.code&&(t.init=[].concat(f()(e.data.data)),t.total=t.init.length,t.handleInit(t.init))})},handleInit:function(t){var e=[];for(var a in e[0]=t,this.typeArr){var i=this.typeArr[a].value;e[i]||(e[i]=[])}for(var s in t){var o=t[s].type-0;e[o=o||1].push(t[s])}this.list=e,this.handleFilterList()},handleFilterList:function(){var t=this.currentPage-1;this.nowList=this.list[this.listType].slice(t*this.nowPage,this.currentPage*this.nowPage),this.loading=!1,!this.nowList.length&&this.currentPage>1&&(this.currentPage=t,t=this.currentPage-1,this.nowList=this.list[this.listType].slice(t*this.nowPage,this.currentPage*this.nowPage))},handleSelectionChange:function(t){this.multipleSelection=t},handleReturnTime:function(t){return t.replace(/(T).+/g,"")},handleEdit:function(t,e){this.editId=e.row._id},handleDelete:function(t,e){var a=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.post("/app/informa/remove",{id:e._id}).then(function(t){200==t.data.code&&(a.$message({type:"success",message:t.data.msg}),a.handleAjaxList())})}).catch(function(){})},handleTagFilter:function(t){var e=void 0;switch(t-0){case 1:e="primary";break;case 2:e="success";break;case 3:e="info";break;case 4:e="warning";break;default:e="danger"}return e},handleFilterTag:function(t,e){return this.listType=t,e.type===t+""},handleReFilter:function(t){var e=this;t.tag.length||(this.listType=0),this.nowList=this.list[this.listType].slice(0,this.nowPage),this.total=this.list[this.listType].length,this.nowList.length||setTimeout(function(){e.nowList=e.list[0].slice(0,e.nowPage),e.total=1},600),this.currentPage=1},handleCurrentChange:function(t){this.currentPage=t,this.handleFilterList()},handleNewAndEdit:function(){this.isEdit=!0},handleReturnList:function(){this.isEdit=!1,this.editId=0}},components:{Edit:a("C7Lr")(k,A,!1,function(t){a("2iqz"),a("z1xN")},"data-v-35c8f5a6",null).exports}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"work"},[a("div",{staticClass:"work-head"},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleNewAndEdit}},[t._v("新建")]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:t.handleRefresh}},[t._v("刷新")])],1),t._v(" "),a("div",{staticClass:"table-box"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.nowList,border:"","tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange,"filter-change":t.handleReFilter}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"日期",sortable:"",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.handleReturnTime(e.row.createtime)))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"cover",label:"封面",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"list-cover",attrs:{src:t.row.cover}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"type",label:"标签",width:"160","column-key":"tag",filters:t.typeArr,"filter-method":t.handleFilterTag,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.handleTagFilter(e.row.type),"disable-transitions":""}},[t._v(t._s(t.typeArr[e.row.type-1].text||"暂无"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e)}}}),t._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}})]}}])})],1),t._v(" "),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"current-page":t.currentPage,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("div",{class:["work-edit",{active:t.isEdit||t.editId}]},[a("Edit",{attrs:{id:t.editId},on:{handleReturnHome:t.handleReturnList}})],1)])},staticRenderFns:[]};var L=a("C7Lr")(S,$,!1,function(t){a("7tAS")},"data-v-6b87df69",null).exports,T=a("3cXf"),E=a.n(T),R={name:"basis",data:function(){return{form:{video:"",workCover:[{name:"创意短视频",url:"http://localhost:3000/images/web/index/1.png"},{name:"企业产品",url:"http://localhost:3000/images/web/index/2.png"},{name:"影视广告",url:"http://localhost:3000/images/web/index/3.png"},{name:"ABOUT ME",url:"http://localhost:3000/images/web/index/4.png"}],course:"",logos:[]},dragging:null}},mounted:function(){this.handleinit()},methods:{handleinit:function(){var t=this;this.$axios.get("/app/index").then(function(e){200==e.status&&(t.form=JSON.parse(e.data.data[0].cont))}).catch(function(t){})},handleVideo:function(t,e){200==t.code&&(this.form.video=t.data[0],this.$message.success(t.msg))},handleWorkSuccess:function(t,e){200==t.code&&(this.form.workCover[t.num].url=t.data[0],this.$message.success(t.msg))},handleCourseSuccess:function(t,e){200==t.code&&(this.form.course=t.data[0],this.$message.success(t.msg))},handleLogoSuccess:function(t,e){200==t.code&&(this.form.logos.push(t.data[0]),this.$message.success(t.msg))},handleDragStart:function(t,e){this.dragging=e},handleDragOver:function(t,e){t.dataTransfer.dropEffect="move"},handleDragEnter:function(t,e){if(t.dataTransfer.effectAllowed="move",e!==this.dragging){var a=[].concat(f()(this.form.logos)),i=a.indexOf(this.dragging),s=a.indexOf(e);a.splice.apply(a,[s,0].concat(f()(a.splice(i,1)))),this.form.logos=a}},handleDragEnd:function(t,e){this.dragging=null},handleDelete:function(t,e){this.form.logos.splice(e,1),this.$message({type:"success",message:"删除成功"})},beforeAvatarUpload:function(t){var e=t.size/1024/1024<5;return e||this.$message.error("上传图片大小不能超过 5MB!"),e},hanleOnSubmit:function(){var t=this,e=E()(this.form);this.$axios.post("/app/index",{cont:e}).then(function(e){t.$message({type:"success",message:e.data.msg})}).catch(function(e){t.$message({type:"error",message:"网络错误"})})}}},P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"basis",attrs:{id:"basis"}},[t._m(0),t._v(" "),a("div",{staticClass:"form"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[a("div",{staticClass:"index-box"},[a("div",{staticClass:"index-title"},[t._v("首页视频")]),t._v(" "),a("div",{staticClass:"index-work index-box"},[a("el-form-item",{attrs:{label:"首页视频"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/app/upload/index",data:{type:1},"show-file-list":!1,"on-success":t.handleVideo}},[t.form.video?a("video",{staticClass:"index-work-cover avatar",attrs:{src:t.form.video}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)]),t._v(" "),a("div",{staticClass:"index-box"},[a("div",{staticClass:"index-title"},[t._v("首页作品背景设置")]),t._v(" "),a("div",{staticClass:"index-work index-box"},t._l(t.form.workCover,function(e,i){return a("el-form-item",{key:i,attrs:{label:e.name}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/app/upload/index",data:{type:1,num:i},"show-file-list":!1,"on-success":t.handleWorkSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.workCover[i].url?a("img",{staticClass:"index-work-cover avatar",attrs:{src:t.form.workCover[i].url}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)}),1)]),t._v(" "),a("div",{staticClass:"index-box"},[a("div",{staticClass:"index-title"},[t._v("公司历程设置")]),t._v(" "),a("el-form-item",{attrs:{label:"公司历程"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/app/upload/index",data:{type:2},"show-file-list":!1,"on-success":t.handleCourseSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.course?a("img",{staticClass:"index-course avatar",attrs:{src:t.form.course}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),t._v(" "),a("div",{staticClass:"index-box"},[a("div",{staticClass:"index-title"},[t._v("合作伙伴logo设置")]),t._v(" "),a("el-form-item",{attrs:{label:"LOGO"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/app/upload/index",data:{type:3},"show-file-list":!1,"on-success":t.handleLogoSuccess,"before-upload":t.beforeAvatarUpload}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),t._v(" "),a("transition-group",{staticClass:"container index-logo-list",attrs:{tag:"div"}},t._l(t.form.logos,function(e,i){return a("div",{key:e,staticClass:"index-logo-item",attrs:{draggable:"true"},on:{dragstart:function(a){return t.handleDragStart(a,e)},dragover:function(a){return a.preventDefault(),t.handleDragOver(a,e)},dragenter:function(a){return t.handleDragEnter(a,e)},dragend:function(a){return t.handleDragEnd(a,e)}}},[a("a",{staticClass:"item-delete",attrs:{href:"javascript:"},on:{click:function(e){return e.stopPropagation(),t.handleDelete(e,i)}}},[a("i",{staticClass:"el-icon-close"})]),t._v(" "),a("img",{attrs:{src:e,alt:""}})])}),0)],1),t._v(" "),a("el-form-item",{staticClass:"subnit-btn"},[a("el-button",{attrs:{type:"primary"},on:{click:t.hanleOnSubmit}},[t._v("提交保存")])],1)],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"base-head"},[e("p",[this._v("首页设置")])])}]};var V=a("C7Lr")(R,P,!1,function(t){a("wDo5"),a("QWi/")},"data-v-6a03d488",null).exports,F={name:"banner",data:function(){return{form:{work:"",news:"",about:"",client:"",join:"",call:""}}},mounted:function(){this.handleInit()},methods:{handleInit:function(){var t=this;this.$axios.get("/app/get/banner").then(function(e){200==e.status&&(t.form=JSON.parse(e.data.data[0].cont))}).catch(function(t){})},handleAvatarSuccess:function(t,e){200==t.code&&(this.form[t.type]="http://localhost:3000"+t.data[0],this.$message.success(t.msg))},beforeAvatarUpload:function(t){var e=t.size/1024/1024<5;return e||this.$message.error("上传图片大小不能超过 5MB!"),e},hanleOnSubmit:function(){var t=this,e=E()(this.form);this.$axios.post("/app/set/banner",{cont:e}).then(function(e){t.$message({type:"success",message:e.data.msg})}).catch(function(e){t.$message({type:"error",message:"网络错误"})})}}},j={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"banner"},[a("div",{staticClass:"form"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"案例列表"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/app/upload/banner",data:{type:"work"},"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.work?a("img",{staticClass:"avatar",attrs:{src:t.form.work}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"新闻列表"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/app/upload/banner",data:{type:"news"},"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.news?a("img",{staticClass:"avatar",attrs:{src:t.form.news}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"关于我们"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/app/upload/banner",data:{type:"about"},"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.about?a("img",{staticClass:"avatar",attrs:{src:t.form.about}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"我的客户"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/app/upload/banner",data:{type:"client"},"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.client?a("img",{staticClass:"avatar",attrs:{src:t.form.client}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"加入我们"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/app/upload/banner",data:{type:"join"},"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.join?a("img",{staticClass:"avatar",attrs:{src:t.form.join}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"联系我们"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/app/upload/banner",data:{type:"call"},"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.call?a("img",{staticClass:"avatar",attrs:{src:t.form.call}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.hanleOnSubmit}},[t._v("提交保存")])],1)],1)],1)])},staticRenderFns:[]};var I=a("C7Lr")(F,j,!1,function(t){a("Z8yb")},"data-v-b0bb8832",null).exports;i.default.use(c.a);var O=new c.a({routes:[{path:"/",name:"app",component:u},{path:"/basis",name:"basis",component:V},{path:"/banner",name:"banner",component:I},{path:"/work",name:"work",component:x},{path:"/news",name:"news",component:L}]}),U=a("4gzT"),D=a.n(U);a("JKkS");i.default.use(D.a),i.default.config.productionTip=!1,i.default.prototype.$axios=l.a,new i.default({el:"#app",router:O,components:{App:n},template:"<App/>"})},"QWi/":function(t,e){},Z8yb:function(t,e){},gwJ0:function(t,e){},l3vy:function(t,e){},v158:function(t,e){},wDo5:function(t,e){},z1xN:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a156f56be14d842fb4eb.js.map